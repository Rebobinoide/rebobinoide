int BPM = 120;
int lineTime = 60000/BPM;  // 1000
int shot = lineTime/4;

int lines = 0;
int bar = 0;
int before;
int after;

void setup()
  {
    Serial.begin(9600);
    for(int i=10; i<14; i++ ){
        pinMode(i, OUTPUT); 
      }
    
   for(int i=14; i<20; i++ ){
        pinMode(i, INPUT); 
      }  
  }

//  CHECKS WHICH INPUT IS HIGH. PIPES IT TO INIT AND PICK.
int check(){
    for(int i=14; i<20; i++){
        boolean a = digitalRead(i);
        if(a==HIGH){
          return i;
        }
    }
};

void seq(int var){
    Serial.println(var);
     while(bar<4){
         switch(lines){
             case 0:
                 Serial.print(bar);
                 Serial.print(lines);
                 Serial.println(' ');
                 pick();
                 break;
             case 1:
                 Serial.print(bar);
                 Serial.print(lines);
                 Serial.println(' ');
                 pick();
                 break;
             case 2:
                 Serial.print(bar);
                 Serial.print(lines);
                 Serial.println(' ');
                 pick();
                 break;
             case 3:
                 Serial.print(bar);
                 Serial.print(lines);
                 Serial.println(' ');
                 pick();
                 break;
            }
            
            delay(1000);
      }
}

//   INITIALIZE (FIRST SEQUENCE)
void initial(){
  bar=0;
    int var = check();
    before = var;
    if(before !=0)
        {
          seq(before);
        }
}

void pick(){
        int var = check();
        after = var;
            //             SAME PIN, LINES UNDER 3
        if((after==before)&&(lines<3)){
            lines=0;
        }   //             DIFFERENT PIN, NOT 0
        else if((after !=before) && (after!=0)){ 
            lines=0;
            bar=0;
            before=after;
            seq(after);
        }   //            SAME PIN, LINES UNDER 3
        else if((after==0)&&(lines<3)){
             lines++;
             return;
        }   //           SAME PIN, LINES OVER 3 
        else{ 
          lines=0;
          bar++;
          return;
        }
    }

// ONE NOTE 
void note(int out, int times)
  {
      if(times==0){
        delay(shot);
      }else{
        int time =
        shot/times;
        for(int i=0; i<times; i++)
          {
            digitalWrite(out, HIGH);  
            delay(10);               
            digitalWrite(out, LOW);  
            delay(time-1);  
          };
      };
   };
   
 // ONE LINE (4 NOTES)
 void line(int p0, int t0, int p1, int t1, int p2, int t2, int p3, int t3){
   note(p0, t0);
   note(p1, t1);
   note(p2, t2);
   note(p3, t3);
  };
  
int s[6][4][4][8] = {
  {
        //*************   SEQ 0   **********************//
       {
               {11, 2, 0, 0, 12, 1, 12, 1},
               {10, 1, 0, 0, 12, 2, 12, 1},
               {11, 2, 0, 0, 12, 1, 12, 1},
               {10, 1, 0, 0, 12, 2, 12, 1}
       },       
         
       {       {17, 2, 0, 0, 12, 1, 12, 1},
               {10, 1, 0, 0, 12, 2, 12, 1},
               {17, 2, 0, 0, 12, 1, 12, 1},
               {10, 1, 0, 0, 12, 2, 12, 1}
       },       
         
       {       {11, 2, 0, 0, 12, 1, 12, 1},
               {10, 1, 0, 0, 12, 2, 12, 1},
               {11, 2, 0, 0, 12, 1, 12, 1},
               {10, 1, 0, 0, 12, 2, 12, 1}
       },
       {
               {18, 2, 0, 0, 12, 1, 12, 1},
               {10, 1, 0, 0, 12, 2, 12, 1},
               {18, 2, 0, 0, 12, 1, 12, 1},
               {10, 1, 0, 0, 12, 2, 12, 1}
       }
  },
  
  {
      //*************   SEQ 1   **********************//
       {
               {14, 2, 0, 0, 12, 1, 12, 1},
               {13, 1, 0, 0, 12, 2, 12, 1},
               {14, 2, 0, 0, 12, 1, 12, 1},
               {13, 1, 0, 0, 12, 2, 12, 1}
       },       
         
       {       {14, 2, 0, 0, 12, 1, 12, 1},
               {13, 1, 0, 0, 12, 2, 12, 1},
               {14, 2, 0, 0, 12, 1, 12, 1},
               {13, 1, 0, 0, 12, 2, 12, 1}
       },       
         
       {       {14, 2, 0, 0, 12, 1, 12, 1},
               {13, 1, 0, 0, 12, 2, 12, 1},
               {14, 2, 0, 0, 12, 1, 12, 1},
               {13, 1, 0, 0, 12, 2, 12, 1}
       },
       {
               {14, 2, 0, 0, 12, 1, 12, 1},
               {13, 1, 0, 0, 12, 2, 12, 1},
               {14, 2, 0, 0, 12, 1, 12, 1},
               {13, 1, 0, 0, 12, 2, 12, 1}
       }
 },
 {
     //*************   SEQ 2   **********************//
       {
               {15, 2, 0, 0, 12, 1, 12, 1},
               {16, 1, 0, 0, 12, 2, 12, 1},
               {15, 2, 0, 0, 12, 1, 12, 1},
               {16, 1, 0, 0, 12, 2, 12, 1}
       },       
         
       {       {15, 2, 0, 0, 12, 1, 12, 1},
               {16, 1, 0, 0, 12, 2, 12, 1},
               {15, 2, 0, 0, 12, 1, 12, 1},
               {16, 1, 0, 0, 12, 2, 12, 1}
       },       
         
       {       {15, 2, 0, 0, 12, 1, 12, 1},
               {16, 1, 0, 0, 12, 2, 12, 1},
               {15, 2, 0, 0, 12, 1, 12, 1},
               {16, 1, 0, 0, 12, 2, 12, 1}
       },
       {
               {15, 2, 0, 0, 12, 1, 12, 1},
               {16, 1, 0, 0, 12, 2, 12, 1},
               {15, 2, 0, 0, 12, 1, 12, 1},
               {16, 1, 0, 0, 12, 2, 12, 1}
       }
  },
  
  {
      //*************   SEQ 3   **********************//
       {
               {17, 2, 0, 0, 12, 1, 12, 1},
               {18, 1, 0, 0, 12, 2, 12, 1},
               {17, 2, 0, 0, 12, 1, 12, 1},
               {18, 1, 0, 0, 12, 2, 12, 1}
       },       
         
       {       {17, 2, 0, 0, 12, 1, 12, 1},
               {18, 1, 0, 0, 12, 2, 12, 1},
               {17, 2, 0, 0, 12, 1, 12, 1},
               {18, 1, 0, 0, 12, 2, 12, 1}
       },       
         
       {       {17, 2, 0, 0, 12, 1, 12, 1},
               {18, 1, 0, 0, 12, 2, 12, 1},
               {17, 2, 0, 0, 12, 1, 12, 1},
               {18, 1, 0, 0, 12, 2, 12, 1}
       },
       {
               {17, 2, 0, 0, 12, 1, 12, 1},
               {18, 1, 0, 0, 12, 2, 12, 1},
               {17, 2, 0, 0, 12, 1, 12, 1},
               {18, 1, 0, 0, 12, 2, 12, 1}
       }
 },
 {   //*************   SEQ 4   **********************//
       {
               {19, 2, 0, 0, 12, 1, 12, 1},
               {14, 1, 0, 0, 12, 2, 12, 1},
               {19, 2, 0, 0, 12, 1, 12, 1},
               {14, 1, 0, 0, 12, 2, 12, 1}
       },       
         
       {       {11, 2, 0, 0, 12, 1, 12, 1},
               {10, 1, 0, 0, 12, 2, 12, 1},
               {11, 2, 0, 0, 12, 1, 12, 1},
               {10, 1, 0, 0, 12, 2, 12, 1}
       },       
         
       {       {11, 2, 0, 0, 12, 1, 12, 1},
               {10, 1, 0, 0, 12, 2, 12, 1},
               {11, 2, 0, 0, 12, 1, 12, 1},
               {10, 1, 0, 0, 12, 2, 12, 1}
       },
       {
               {11, 2, 0, 0, 12, 1, 12, 1},
               {10, 1, 0, 0, 12, 2, 12, 1},
               {11, 2, 0, 0, 12, 1, 12, 1},
               {10, 1, 0, 0, 12, 2, 12, 1}
       }
  },
  
  {
      //*************   SEQ 5   **********************//
       {
               {11, 2, 0, 0, 12, 1, 12, 1},
               {10, 1, 0, 0, 12, 2, 12, 1},
               {11, 2, 0, 0, 12, 1, 12, 1},
               {10, 1, 0, 0, 12, 2, 12, 1}
       },       
         
       {       {11, 2, 0, 0, 12, 1, 12, 1},
               {10, 1, 0, 0, 12, 2, 12, 1},
               {11, 2, 0, 0, 12, 1, 12, 1},
               {10, 1, 0, 0, 12, 2, 12, 1}
       },       
         
       {       {11, 2, 0, 0, 12, 1, 12, 1},
               {10, 1, 0, 0, 12, 2, 12, 1},
               {11, 2, 0, 0, 12, 1, 12, 1},
               {10, 1, 0, 0, 12, 2, 12, 1}
       },
       {
               {11, 2, 0, 0, 12, 1, 12, 1},
               {10, 1, 0, 0, 12, 2, 12, 1},
               {11, 2, 0, 0, 12, 1, 12, 1},
               {10, 1, 0, 0, 12, 2, 12, 1}
       }
 }  
};

int array = s[after][bar][lines];
 
void loop(){
    int var[8];
    for(int i=0; i<7; i++){
       for(int j=0; j<5; j++){
            for(int a=0; a<5; a++){
                
            }
       }  
    }
}
 


    
 
